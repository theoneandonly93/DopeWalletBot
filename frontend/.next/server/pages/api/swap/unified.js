"use strict";(()=>{var t={};t.id=106,t.ids=[106],t.modules={145:t=>{t.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(t,e)=>{Object.defineProperty(e,"l",{enumerable:!0,get:function(){return function t(e,n){return n in e?e[n]:"then"in e&&"function"==typeof e.then?e.then(e=>t(e,n)):"function"==typeof e&&"default"===n?e:void 0}}})},302:(t,e,n)=>{n.r(e),n.d(e,{config:()=>l,default:()=>p,routeModule:()=>d});var a={};n.r(a),n.d(a,{default:()=>u});var r=n(1802),o=n(7153),i=n(6249);let{unifiedSwap:s}=n(5270);async function u(t,e){if("POST"!==t.method)return e.status(405).json({error:"Method not allowed"});try{let{fromToken:n,toToken:a,amount:r,userPubkey:o,destinationAddress:i}=t.body,u=await s({fromToken:n,toToken:a,amount:r,userPubkey:o,destinationAddress:i});e.status(200).json({ok:!0,result:u})}catch(t){e.status(500).json({ok:!1,error:String(t)})}}let p=(0,i.l)(a,"default"),l=(0,i.l)(a,"config"),d=new r.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/swap/unified",pathname:"/api/swap/unified",bundlePath:"",filename:""},userland:a})},7153:(t,e)=>{var n;Object.defineProperty(e,"x",{enumerable:!0,get:function(){return n}}),function(t){t.PAGES="PAGES",t.PAGES_API="PAGES_API",t.APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE"}(n||(n={}))},1802:(t,e,n)=>{t.exports=n(145)},5270:(t,e,n)=>{n.r(e);let a=globalThis.fetch||require("node-fetch"),{Connection:r,VersionedTransaction:o}=require("@solana/web3.js"),i="https://quote-api.jup.ag/v6";new r(process.env.NEXT_PUBLIC_RPC_URL||process.env.NEXT_PUBLIC_RPC||"https://api.mainnet-beta.solana.com");let s={SOLANA:101,BNB:56};function u(t){return t?String(t).startsWith("0x")?s.BNB:(String(t).length,s.SOLANA):s.SOLANA}async function p(t,e,n,r){let o=`${i}/quote?inputMint=${t}&outputMint=${e}&amount=${n}&slippageBps=50`,s=await a(o),u=await s.json(),p=await a(`${i}/swap`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({quoteResponse:u,userPublicKey:r,wrapAndUnwrapSol:!0})});if(!p.ok)throw Error("Jupiter swap failed");let l=await p.json(),d=l?.swapTransaction;return d?{swapTransaction:d}:l}async function l(){return{ok:!1,message:"bnbSwap not implemented"}}async function d(t){let e=await a("https://api.squidrouter.com/v1/route",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,slippage:1})});if(!e.ok){let t=await e.text();throw Error(`crossChainSwap failed: ${e.status} ${t}`)}return await e.json()}async function f({fromToken:t,toToken:e,amount:n,userPubkey:a,destinationAddress:r}){let o=u(t),i=u(e);if(o===s.SOLANA&&i===s.SOLANA)return await p(t,e,n,a);if(o===s.BNB&&i===s.BNB)return await l();let f={fromChain:o===s.SOLANA?"solana":"bsc",toChain:i===s.BNB?"bsc":"solana",fromToken:t,toToken:e,fromAmount:String(n),fromAddress:a,toAddress:r||a};return await d(f)}module.exports={unifiedSwap:f,detectChain:u,solanaSwap:p,bnbSwap:l,crossChainSwap:d}}};var e=require("../../../webpack-api-runtime.js");e.C(t);var n=e(e.s=302);module.exports=n})();