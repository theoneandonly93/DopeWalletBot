"use strict";(()=>{var e={};e.id=528,e.ids=[528],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,n)=>{Object.defineProperty(n,"l",{enumerable:!0,get:function(){return function e(n,t){return t in n?n[t]:"then"in n&&"function"==typeof n.then?n.then(n=>e(n,t)):"function"==typeof n&&"default"===t?n:void 0}}})},3027:(e,n,t)=>{t.r(n),t.d(n,{config:()=>l,default:()=>u,routeModule:()=>d});var r={};t.r(r),t.d(r,{default:()=>s});var o=t(1802),a=t(7153),i=t(6249);async function s(e,n){if("POST"!==e.method)return n.status(405).json({error:"Method not allowed"});try{let{pubkey:t}=e.body||{};if(!t)return n.status(400).json({error:"pubkey required"});let r=process.env.RPC_URL||"https://api.mainnet-beta.solana.com",o=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"getBalance",params:[t]})}).then(e=>e.json()),a=(o.result?.value||0)/1e9,i=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"getTokenAccountsByOwner",params:[t,{programId:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{encoding:"jsonParsed"}]})}).then(e=>e.json()),s=(i.result?.value||[]).map(e=>{let n=e.account?.data?.parsed?.info||{},t=n.tokenAmount?.uiAmount||0;return{address:n.mint||e.pubkey,name:n?.mint||"Unknown",symbol:(n.mint||"").slice(0,6),uiAmountString:t?t.toString():"0",usdValue:"0.00",logoURI:"/token-placeholder.png"}}),u=null;try{let e=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=solana&vs_currencies=usd"),n=await e.json();u=n?.solana?.usd||null}catch(e){u=null}return n.json({sol:a,usdPrice:u,usdBalance:null!==u?(u*a).toFixed(2):null,tokens:s})}catch(e){console.error("balance api error",e),n.status(500).json({error:"internal error"})}}let u=(0,i.l)(r,"default"),l=(0,i.l)(r,"config"),d=new o.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/balance",pathname:"/api/balance",bundlePath:"",filename:""},userland:r})},7153:(e,n)=>{var t;Object.defineProperty(n,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(t||(t={}))},1802:(e,n,t)=>{e.exports=t(145)}};var n=require("../../webpack-api-runtime.js");n.C(e);var t=n(n.s=3027);module.exports=t})();