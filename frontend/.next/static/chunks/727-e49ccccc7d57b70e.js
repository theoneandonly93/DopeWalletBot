(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[727],{2896:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(5893),i=n(1163);function s(){let e=(0,i.useRouter)(),t=e.pathname||"/",n="/"===t?"wallet":t.startsWith("/profile")?"profile":t.startsWith("/swap")?"swap":t.startsWith("/earn")?"earn":t.startsWith("/browser")?"browser":"wallet",s=e=>{let{name:t,active:n}=e,i=n?"white":"rgba(255,255,255,0.6)";return"Wallet"===t?(0,r.jsxs)("svg",{width:18,height:18,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[(0,r.jsx)("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2",stroke:i,strokeWidth:"1.6",fill:"none"}),(0,r.jsx)("path",{d:"M16 10h2v2",stroke:i,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}):"Swap"===t?(0,r.jsxs)("svg",{width:18,height:18,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[(0,r.jsx)("path",{d:"M4 7h11l-3-3",stroke:i,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M20 17H9l3 3",stroke:i,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}):"Profile"===t?(0,r.jsxs)("svg",{width:18,height:18,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[(0,r.jsx)("circle",{cx:"12",cy:"8",r:"3",stroke:i,strokeWidth:"1.6",fill:"none"}),(0,r.jsx)("path",{d:"M4 20c1.5-4 6-6 8-6s6.5 2 8 6",stroke:i,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}):(0,r.jsxs)("svg",{width:18,height:18,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"9",stroke:i,strokeWidth:"1.6",fill:"none"}),(0,r.jsx)("path",{d:"M9 15l6-3-3 6-3-3z",stroke:i,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})},a=t=>{let{href:n,label:i,active:a}=t,l=t=>{var r;null==t||null===(r=t.preventDefault)||void 0===r||r.call(t);try{e.push(n)}catch(e){window.location.href=n}};return(0,r.jsxs)("div",{role:"button",tabIndex:0,onClick:l,onTouchStart:t=>{try{e.push(n)}catch(e){window.location.href=n}},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),l())},className:"flex flex-col items-center text-xs px-3 py-3 touch-manipulation w-20 ".concat(a?"text-white":"text-textDim"," cursor-pointer"),children:[(0,r.jsx)("div",{className:"flex items-center justify-center p-0",children:(0,r.jsx)(s,{name:i,active:a})}),(0,r.jsx)("div",{className:"mt-1 text-[11px] select-none",children:i})]})};return(0,r.jsxs)("nav",{className:"fixed bottom-0 inset-x-0 bg-bg py-2 flex justify-around z-50 pointer-events-auto",children:[(0,r.jsx)(a,{href:"/",label:"Wallet",active:"wallet"===n}),(0,r.jsx)(a,{href:"/swap",label:"Swap",active:"swap"===n}),(0,r.jsx)(a,{href:"/profile",label:"Profile",active:"profile"===n}),(0,r.jsx)(a,{href:"/browser",label:"Browser",active:"browser"===n})]})}n(7294)},6469:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var r=n(5893),i=n(7294),s=n(1163),a=n(7066),l=n(1664),o=n.n(l),c=n(1526),d=n(3495);function u(e){let{onClose:t}=e;return(0,r.jsx)(c.M,{children:(0,r.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 flex flex-col justify-end",onClick:t,children:(0,r.jsxs)(d.E.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{duration:.28},className:"bg-[#111] rounded-t-2xl text-white p-4 space-y-2",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{className:"w-16 h-1 bg-[#333] rounded-full mx-auto mb-3"}),(0,r.jsx)("h3",{className:"text-center text-sm font-semibold text-textDim mb-2",children:"Wallet mini app"}),(0,r.jsxs)("div",{className:"divide-y divide-[#222]",children:[(0,r.jsxs)(o(),{href:"/settings",className:"flex items-center justify-between py-3",children:[(0,r.jsx)("span",{children:"⚙️ Settings"}),(0,r.jsx)("span",{children:"›"})]}),(0,r.jsxs)("a",{href:"https://t.me/dopewalletbot",target:"_blank",rel:"noreferrer",className:"flex items-center justify-between py-3",children:[(0,r.jsx)("span",{children:"\uD83E\uDD16 Open Bot"}),(0,r.jsx)("span",{children:"›"})]}),(0,r.jsxs)("button",{onClick:()=>window.location.reload(),className:"flex items-center justify-between py-3 w-full",children:[(0,r.jsx)("span",{children:"\uD83D\uDD04 Reload Page"}),(0,r.jsx)("span",{children:"›"})]}),(0,r.jsxs)(o(),{href:"/terms",className:"flex items-center justify-between py-3",children:[(0,r.jsx)("span",{children:"\uD83D\uDCC4 Terms of Use"}),(0,r.jsx)("span",{children:"›"})]}),(0,r.jsxs)(o(),{href:"/privacy",className:"flex items-center justify-between py-3",children:[(0,r.jsx)("span",{children:"\uD83D\uDD12 Privacy Policy"}),(0,r.jsx)("span",{children:"›"})]}),(0,r.jsxs)("button",{onClick:()=>{try{localStorage.removeItem("dopewallet_signedin")}catch(e){}try{window.dispatchEvent(new Event("dopewallet:signout"))}catch(e){}window.location.reload()},className:"flex items-center justify-between py-3 text-sm w-full",children:[(0,r.jsx)("span",{children:"\uD83D\uDD13 Sign out"}),(0,r.jsx)("span",{children:"›"})]}),(0,r.jsxs)("button",{className:"flex items-center justify-between py-3 text-red-500 w-full",children:[(0,r.jsx)("span",{children:"\uD83D\uDDD1 Remove from Menu"}),(0,r.jsx)("span",{children:"›"})]})]}),(0,r.jsx)("button",{onClick:t,className:"mt-4 w-full bg-[#222] rounded-xl py-2 text-sm text-textDim",children:"Close"})]})},"menu")})}var h=n(3454);function x(){let[e,t]=(0,i.useState)(!1),[n,l]=(0,i.useState)(null),o=(0,s.useRouter)();return(0,i.useEffect)(()=>{try{var e,t,n;let r=null===(e=window.Telegram)||void 0===e?void 0:e.WebApp,i=(null==r?void 0:null===(n=r.initDataUnsafe)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.id)||(null==r?void 0:r.initData)&&(()=>{try{var e;return null===(e=JSON.parse(r.initData).user)||void 0===e?void 0:e.id}catch(e){return null}})();if(!i)return;(async()=>{try{var e;let t=h.env.NEXT_PUBLIC_BACKEND_URL||"https://dopewalletbot-production.up.railway.app",n=await a.Z.get("".concat(t,"/profile/by_telegram/").concat(i));l((null===(e=n.data)||void 0===e?void 0:e.avatar_url)||null)}catch(e){}})()}catch(e){}},[]),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-bg",children:[(0,r.jsx)("button",{onClick:()=>o.push("/profile?edit=true"),className:"flex items-center gap-2",children:n?(0,r.jsx)("img",{src:n,alt:"avatar",className:"w-8 h-8 rounded-full object-cover"}):(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#222] flex items-center justify-center",children:(0,r.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[(0,r.jsx)("circle",{cx:"12",cy:"8",r:"3",stroke:"rgba(255,255,255,0.7)",strokeWidth:"1.6",fill:"none"}),(0,r.jsx)("path",{d:"M4 20c1.5-4 6-6 8-6s6.5 2 8 6",stroke:"rgba(255,255,255,0.7)",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("p",{className:"font-semibold",children:"\xa0"})}),(0,r.jsx)("button",{onClick:()=>t(!0),className:"text-textDim hover:text-white p-1",children:(0,r.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[(0,r.jsx)("circle",{cx:"5",cy:"12",r:"1.5",stroke:"rgba(255,255,255,0.7)",strokeWidth:"1.6",fill:"none"}),(0,r.jsx)("circle",{cx:"12",cy:"12",r:"1.5",stroke:"rgba(255,255,255,0.7)",strokeWidth:"1.6",fill:"none"}),(0,r.jsx)("circle",{cx:"19",cy:"12",r:"1.5",stroke:"rgba(255,255,255,0.7)",strokeWidth:"1.6",fill:"none"})]})}),e&&(0,r.jsx)(u,{onClose:()=>t(!1)})]})}},7751:function(e,t,n){"use strict";n.d(t,{QY:function(){return a},Sm:function(){return l},xp:function(){return s}});var r=n(7066);let i=n(3454).env.NEXT_PUBLIC_BACKEND_URL||"https://dopewalletbot-production.up.railway.app";async function s(e){try{return(await r.Z.get("".concat(i,"/api/wallet/portfolio"),{params:{pubkey:e}})).data}catch(e){var t;return console.warn("getPortfolio failed",null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status,null==e?void 0:e.message),{tokens:[],lp:[],balance:0}}}async function a(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;return(await r.Z.post("".concat(i,"/swap/quote"),{inputMint:e,outputMint:t,amount:n,slippageBps:s})).data}async function l(e,t){return(await r.Z.post("".concat(i,"/swap/execute"),{userPrivateKey:e,route:t})).data}},1441:function(e,t,n){"use strict";n.d(t,{EK:function(){return h},wb:function(){return p},FV:function(){return x}});var r=n(7191),i=n.n(r),s=n(2153),a=n(2678),l=n(95);async function o(e,t){let n=new TextEncoder,r=await crypto.subtle.importKey("raw",n.encode(e),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:1e5,hash:"SHA-256"},r,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function c(e,t){let n=crypto.getRandomValues(new Uint8Array(12)),r=crypto.getRandomValues(new Uint8Array(16)),i=await o(e,r),s=new TextEncoder().encode(JSON.stringify(t)),a=new Uint8Array(await crypto.subtle.encrypt({name:"AES-GCM",iv:n},i,s));return btoa(JSON.stringify({iv:Array.from(n),salt:Array.from(r),ct:Array.from(a)}))}async function d(e,t){let{iv:n,salt:r,ct:i}=JSON.parse(atob(t)),s=await o(e,new Uint8Array(r)),a=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(n)},s,new Uint8Array(i));return JSON.parse(new TextDecoder().decode(new Uint8Array(a)))}let u="DW_VAULT_V1";async function h(){let e=s.OF(128),t=await s.OI(e),{key:n}=(0,a.derivePath)("m/44'/501'/0'/0'",t.toString("hex")),r=l.RG.fromSeed(n);return{pubkey:r.publicKey.toBase58(),pkBase58:i().encode(r.secretKey),mnemonic:e,createdAt:Date.now()}}async function x(e,t){let n=await c(e,t);localStorage.setItem(u,n)}async function p(e){let t=localStorage.getItem(u);return t?await d(e,t):null}},2361:function(){},4616:function(){},5024:function(){},5545:function(){}}]);