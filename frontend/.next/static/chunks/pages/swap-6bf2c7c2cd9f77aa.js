(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[503],{9238:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/swap",function(){return s(4999)}])},2896:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var n=s(5893),a=s(1664),r=s.n(a),l=s(1163);function i(){let e=(0,l.useRouter)(),t=e.pathname.startsWith("/swap")?"swap":e.pathname.startsWith("/earn")?"earn":e.pathname.startsWith("/profile")?"profile":e.pathname.startsWith("/browser")?"browser":"wallet",s=e=>{let{href:t,label:s,active:a}=e;return(0,n.jsxs)(r(),{href:t,className:"flex flex-col items-center text-xs ".concat(a?"text-white":"text-textDim"),children:[(0,n.jsx)("div",{className:"w-9 h-9 rounded-full flex items-center justify-center ".concat(a?"bg-accent/20":"bg-[#171717]"),children:"Wallet"===s?"\uD83D\uDD37":"Swap"===s?"\uD83D\uDD01":"Profile"===s?"\uD83E\uDEAA":"Browser"===s?"\uD83E\uDDED":"%"}),(0,n.jsx)("div",{className:"mt-1",children:s})]})};return(0,n.jsxs)("nav",{className:"fixed bottom-0 inset-x-0 bg-bg border-t border-line py-2 flex justify-around",children:[(0,n.jsx)(s,{href:"/",label:"Wallet",active:"wallet"===t}),(0,n.jsx)(s,{href:"/swap",label:"Swap",active:"swap"===t}),(0,n.jsx)(s,{href:"/profile",label:"Profile",active:"profile"===t}),(0,n.jsx)(s,{href:"/browser",label:"Browser",active:"browser"===t})]})}},6469:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var n=s(5893),a=s(7294),r=s(1163),l=s(7066),i=s(1664),c=s.n(i),o=s(1526),u=s(3495);function d(e){let{onClose:t}=e;return(0,n.jsx)(o.M,{children:(0,n.jsx)(u.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 flex flex-col justify-end",onClick:t,children:(0,n.jsxs)(u.E.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{duration:.28},className:"bg-[#111] rounded-t-2xl text-white p-4 space-y-2",onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("div",{className:"w-16 h-1 bg-[#333] rounded-full mx-auto mb-3"}),(0,n.jsx)("h3",{className:"text-center text-sm font-semibold text-textDim mb-2",children:"Wallet mini app"}),(0,n.jsxs)("div",{className:"divide-y divide-[#222]",children:[(0,n.jsxs)(c(),{href:"/settings",className:"flex items-center justify-between py-3",children:[(0,n.jsx)("span",{children:"⚙️ Settings"}),(0,n.jsx)("span",{children:"›"})]}),(0,n.jsxs)("a",{href:"https://t.me/dopewalletbot",target:"_blank",rel:"noreferrer",className:"flex items-center justify-between py-3",children:[(0,n.jsx)("span",{children:"\uD83E\uDD16 Open Bot"}),(0,n.jsx)("span",{children:"›"})]}),(0,n.jsxs)("button",{onClick:()=>window.location.reload(),className:"flex items-center justify-between py-3 w-full",children:[(0,n.jsx)("span",{children:"\uD83D\uDD04 Reload Page"}),(0,n.jsx)("span",{children:"›"})]}),(0,n.jsxs)(c(),{href:"/terms",className:"flex items-center justify-between py-3",children:[(0,n.jsx)("span",{children:"\uD83D\uDCC4 Terms of Use"}),(0,n.jsx)("span",{children:"›"})]}),(0,n.jsxs)(c(),{href:"/privacy",className:"flex items-center justify-between py-3",children:[(0,n.jsx)("span",{children:"\uD83D\uDD12 Privacy Policy"}),(0,n.jsx)("span",{children:"›"})]}),(0,n.jsxs)("button",{onClick:()=>{try{localStorage.removeItem("dopewallet_signedin")}catch(e){}try{window.dispatchEvent(new Event("dopewallet:signout"))}catch(e){}window.location.reload()},className:"flex items-center justify-between py-3 text-sm w-full",children:[(0,n.jsx)("span",{children:"\uD83D\uDD13 Sign out"}),(0,n.jsx)("span",{children:"›"})]}),(0,n.jsxs)("button",{className:"flex items-center justify-between py-3 text-red-500 w-full",children:[(0,n.jsx)("span",{children:"\uD83D\uDDD1 Remove from Menu"}),(0,n.jsx)("span",{children:"›"})]})]}),(0,n.jsx)("button",{onClick:t,className:"mt-4 w-full bg-[#222] rounded-xl py-2 text-sm text-textDim",children:"Close"})]})},"menu")})}var x=s(3454);function m(){let[e,t]=(0,a.useState)(!1),[s,i]=(0,a.useState)(null),c=(0,r.useRouter)();return(0,a.useEffect)(()=>{try{var e,t,s;let n=null===(e=window.Telegram)||void 0===e?void 0:e.WebApp,a=(null==n?void 0:null===(s=n.initDataUnsafe)||void 0===s?void 0:null===(t=s.user)||void 0===t?void 0:t.id)||(null==n?void 0:n.initData)&&(()=>{try{var e;return null===(e=JSON.parse(n.initData).user)||void 0===e?void 0:e.id}catch(e){return null}})();if(!a)return;(async()=>{try{var e;let t=x.env.NEXT_PUBLIC_BACKEND_URL||"https://dopewalletbot-production.up.railway.app",s=await l.Z.get("".concat(t,"/profile/by_telegram/").concat(a));i((null===(e=s.data)||void 0===e?void 0:e.avatar_url)||null)}catch(e){}})()}catch(e){}},[]),(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-line bg-bg",children:[(0,n.jsx)("button",{onClick:()=>c.push("/profile?edit=true"),className:"flex items-center gap-2",children:s?(0,n.jsx)("img",{src:s,alt:"avatar",className:"w-8 h-8 rounded-full object-cover"}):(0,n.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#222] flex items-center justify-center text-sm",children:"\uD83D\uDC7B"})}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("p",{className:"font-semibold",children:"\xa0"})}),(0,n.jsx)("button",{onClick:()=>t(!0),className:"text-2xl text-textDim hover:text-white",children:"•••"}),e&&(0,n.jsx)(d,{onClose:()=>t(!1)})]})}},7751:function(e,t,s){"use strict";s.d(t,{QY:function(){return l},Sm:function(){return i},xp:function(){return r}});var n=s(7066);let a=s(3454).env.NEXT_PUBLIC_BACKEND_URL||"https://dopewalletbot-production.up.railway.app";async function r(e){try{return(await n.Z.get("".concat(a,"/api/wallet/portfolio"),{params:{pubkey:e}})).data}catch(e){var t;return console.warn("getPortfolio failed",null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status,null==e?void 0:e.message),{tokens:[],lp:[],balance:0}}}async function l(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;return(await n.Z.post("".concat(a,"/swap/quote"),{inputMint:e,outputMint:t,amount:s,slippageBps:r})).data}async function i(e,t){return(await n.Z.post("".concat(a,"/swap/execute"),{userPrivateKey:e,route:t})).data}},1441:function(e,t,s){"use strict";s.d(t,{EK:function(){return x},wb:function(){return p},FV:function(){return m}});var n=s(7191),a=s.n(n),r=s(2153),l=s(2678),i=s(95);async function c(e,t){let s=new TextEncoder,n=await crypto.subtle.importKey("raw",s.encode(e),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:1e5,hash:"SHA-256"},n,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function o(e,t){let s=crypto.getRandomValues(new Uint8Array(12)),n=crypto.getRandomValues(new Uint8Array(16)),a=await c(e,n),r=new TextEncoder().encode(JSON.stringify(t)),l=new Uint8Array(await crypto.subtle.encrypt({name:"AES-GCM",iv:s},a,r));return btoa(JSON.stringify({iv:Array.from(s),salt:Array.from(n),ct:Array.from(l)}))}async function u(e,t){let{iv:s,salt:n,ct:a}=JSON.parse(atob(t)),r=await c(e,new Uint8Array(n)),l=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(s)},r,new Uint8Array(a));return JSON.parse(new TextDecoder().decode(new Uint8Array(l)))}let d="DW_VAULT_V1";async function x(){let e=r.OF(128),t=await r.OI(e),{key:s}=(0,l.derivePath)("m/44'/501'/0'/0'",t.toString("hex")),n=i.RG.fromSeed(s);return{pubkey:n.publicKey.toBase58(),pkBase58:a().encode(n.secretKey),mnemonic:e,createdAt:Date.now()}}async function m(e,t){let s=await o(e,t);sessionStorage.setItem(d,s)}async function p(e){let t=sessionStorage.getItem(d);return t?await u(e,t):null}},4999:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var n=s(5893),a=s(7294),r=s(6469),l=s(2896),i=s(1664),c=s.n(i);function o(e){let{tokens:t=[]}=e;return(0,n.jsxs)("div",{className:"bg-[#111] rounded-2xl border border-[#222] p-3 mt-4",children:[(0,n.jsx)("h2",{className:"text-xs text-textDim font-semibold mb-2",children:"TRENDING ON SOLANA"}),t.map(e=>(0,n.jsxs)(c(),{href:"/token/".concat(e.address),className:"flex items-center justify-between py-2 border-b border-[#222] last:border-0",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("img",{src:e.logoURI,alt:e.symbol,className:"w-8 h-8 rounded-full"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-semibold",children:e.symbol}),(0,n.jsxs)("p",{className:"text-xs text-textDim",children:["$",(e.volume24h||e.volume_24h||0).toLocaleString()," Vol"]})]})]}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsxs)("p",{className:"text-sm font-semibold",children:["$",(e.price||e.value||0).toFixed?(e.price||e.value).toFixed(4):e.price||e.value]}),(0,n.jsxs)("p",{className:"".concat((e.change24h||e.change_24h||0)>=0?"text-green-400":"text-red-400"," text-xs"),children:[(e.change24h||e.change_24h||0).toFixed?(e.change24h||e.change_24h||0).toFixed(2):e.change24h||e.change_24h||0,"%"]})]})]},e.address))]})}var u=s(7751),d=s(1441),x=s(3454);function m(){let[e,t]=(0,a.useState)("0"),[s,i]=(0,a.useState)("0.00"),[c,m]=(0,a.useState)(null),[p,h]=(0,a.useState)(!1),[f,b]=(0,a.useState)("So11111111111111111111111111111111111111112"),[w,y]=(0,a.useState)("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),[v,j]=(0,a.useState)(null),[g,N]=(0,a.useState)("Most Traded"),[D,S]=(0,a.useState)([]);async function _(){if(!v)return alert("Unlock your wallet first.");try{h(!0);let t=await (0,u.QY)(f,w,e);m(t),i(parseFloat(t.outAmountUSD||0).toFixed(2))}catch(e){console.error(e),alert("Quote failed: "+((null==e?void 0:e.message)||e))}finally{h(!1)}}async function E(){if(!v)return alert("Unlock your wallet first.");try{h(!0);let t=c||await (0,u.QY)(f,w,e),s=prompt("Enter password to unlock your wallet for the swap:");if(!s)throw Error("Password required.");let n=await (0,d.wb)(s);if(!(null==n?void 0:n.pkBase58))throw Error("Unable to unlock vault or private key missing.");let a=await (0,u.Sm)(n.pkBase58,t);(null==a?void 0:a.success)&&a.signature?alert("Swap complete: "+a.signature):(null==a?void 0:a.signature)?alert("Swap submitted: "+a.signature):alert("Swap complete (no signature returned).")}catch(e){console.error(e),alert("Swap failed: "+((null==e?void 0:e.message)||e))}finally{h(!1)}}return x.env.NEXT_PUBLIC_RPC,(0,a.useEffect)(()=>{(async()=>{try{let e=sessionStorage.getItem("DW_LAST_PW");if(e){let t=await (0,d.wb)(e);j(t)}}catch(e){}})()},[]),(0,a.useEffect)(()=>{(async()=>{try{let e=x.env.NEXT_PUBLIC_BIRDEYE_API_KEY||"",t=await fetch("https://public-api.birdeye.so/public/trending?sort_by=volume_24h",{headers:e?{"X-API-KEY":e}:{}}),s=await t.json(),n=((null==s?void 0:s.data)||[]).map(e=>({address:e.address||e.mint||e.id,logoURI:e.logo||e.logoURI||e.image||"",symbol:e.symbol||e.ticker||e.name||"",price:Number(e.price||e.value||e.last_price||0),change24h:Number(e.change_24h||e.price_change_24h||0),volume24h:Number(e.volume_24h||e.volume||0)}));S(n)}catch(e){console.error("Trending fetch failed",e)}})()},[]),(0,a.useEffect)(()=>{S([{name:"SOL",symbol:"SOL",price:144.22,change:-3.4,logo:"/sol.png"},{name:"USDC",symbol:"USDC",price:1,change:.02,logo:"/usdc.png"},{name:"BONK",symbol:"BONK",price:28e-6,change:8.3,logo:"/bonk.png"}])},[]),(0,n.jsxs)("div",{className:"min-h-screen bg-bg text-white pb-24",children:[(0,n.jsx)(r.Z,{}),(0,n.jsxs)("div",{className:"p-4 space-y-3",children:[(0,n.jsxs)("div",{className:"rounded-xl p-4 space-y-4 relative bg-card",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-textDim text-xs mb-1",children:"You swap"}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("input",{type:"number",value:e,onChange:e=>t(e.target.value),className:"input input-ghost text-3xl outline-none w-2/3",placeholder:"0"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("div",{className:"badge badge-outline rounded-full px-2 py-1 text-sm flex items-center gap-1",children:[(0,n.jsx)("img",{src:"/sol.png",alt:"SOL",className:"w-4 h-4"}),"SOL"]}),(0,n.jsx)("button",{className:"btn btn-ghost btn-sm",children:"Deposit"})]})]}),(0,n.jsxs)("div",{className:"text-textDim text-sm",children:["$",s]})]}),(0,n.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2 -bottom-4 bg-bg rounded-full w-8 h-8 flex items-center justify-center",children:(0,n.jsx)("div",{className:"rotate-90",children:"⇅"})}),(0,n.jsxs)("div",{className:"pt-8",children:[(0,n.jsx)("div",{className:"text-textDim text-xs mb-1",children:"You receive"}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("input",{type:"text",disabled:!0,value:c?c.outAmountUi:"0",className:"input input-ghost text-3xl outline-none w-2/3"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("div",{className:"badge badge-outline rounded-full px-2 py-1 text-sm flex items-center gap-1",children:[(0,n.jsx)("img",{src:"/usdc.png",alt:"USDC",className:"w-4 h-4"}),"USDC"]}),(0,n.jsx)("button",{className:"btn btn-ghost btn-sm",children:"›"})]})]}),(0,n.jsxs)("div",{className:"text-textDim text-sm",children:["$",s]})]})]}),(0,n.jsx)("button",{onClick:_,disabled:p,className:"btn btn-primary w-full",children:p?"Fetching...":"Get Quote"}),(0,n.jsx)("button",{onClick:E,disabled:p,className:"btn w-full btn-outline",children:p?"Processing...":"Swap Now"})]}),(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("div",{className:"text-xs text-textDim mb-2",children:"TRENDING ON SOLANA"}),(0,n.jsxs)("div",{className:"bg-card rounded-xl p-3",children:[(0,n.jsx)("div",{className:"flex justify-around text-sm mb-2",children:["Most Traded","All Tokens","Top Gainers","Top Losers"].map(e=>(0,n.jsx)("button",{onClick:()=>N(e),className:"py-2 w-1/4 ".concat(g===e?"text-[#3B82F6] border-b-2 border-[#3B82F6]":"text-textDim"),children:e},e))}),(0,n.jsx)(o,{tokens:D})]})]}),(0,n.jsx)(l.Z,{})]})}},2361:function(){},4616:function(){},5024:function(){},5545:function(){}},function(e){e.O(0,[818,664,717,888,774,179],function(){return e(e.s=9238)}),_N_E=e.O()}]);