(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5728:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(8543)}])},2002:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var n=s(5893),a=s(7294),l=s(7066),i=s(6571);function o(e){let{token:t,onClose:s}=e,[o,r]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{t&&(async()=>{try{var e;let s=await l.Z.get("https://api.dexscreener.com/latest/dex/tokens/".concat(t.mint)),n=null===(e=s.data.pairs)||void 0===e?void 0:e[0];n&&r("https://dexscreener.com/solana/".concat(n.pairAddress))}catch(e){console.error(e)}finally{d(!1)}})()},[t]),t)?(0,n.jsx)(i.E.div,{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("div",{className:"card bg-neutral text-white w-[90%] md:w-[70%] lg:w-[50%] h-[70%] overflow-hidden relative",children:[(0,n.jsx)("button",{className:"absolute top-2 right-2 btn btn-sm btn-error text-white",onClick:s,children:"✕"}),(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-2",children:t.symbol}),(0,n.jsx)("p",{className:"text-xs text-gray-400 mb-2",children:t.mint}),c&&(0,n.jsx)("p",{className:"text-gray-400",children:"Loading chart..."}),o?(0,n.jsx)("iframe",{src:o,className:"w-full h-full border-0 rounded-md",title:"DexScreener Chart"}):!c&&(0,n.jsx)("p",{className:"text-gray-500 text-sm",children:"No chart data found for this token."})]})]})}):null}},5342:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var n=s(5893),a=s(1163),l=s(7294),i=s(6571);function o(e){let{onFinish:t}=e;return l.useEffect(()=>{let e=setTimeout(()=>{t()},1200);return()=>clearTimeout(e)},[t]),(0,n.jsx)(i.E.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-[#1b133d] to-[#0A0A0B]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:(0,n.jsxs)(i.E.div,{initial:{scale:.7,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:120,damping:10},className:"flex flex-col items-center",children:[(0,n.jsx)("img",{src:"/logo-512.png",alt:"DopeWallet Logo",className:"w-24 h-24 mb-2 rounded-full shadow-lg"}),(0,n.jsx)("h1",{className:"text-3xl font-bold text-white tracking-wide",children:"DopeWallet"})]})})}function r(e){let{name:t,className:s="h-6 w-6 text-white"}=e;switch(t){case"home":return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l9-8 9 8v8a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-4H9v4a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-8z"})});case"swap":return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7h11M21 17H10M14 3l7 7-7 7"})});case"browser":return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v2m0 14v2m9-9h-2M5 12H3m15.364-6.364l-1.414 1.414M7.05 16.95l-1.414 1.414M16.95 16.95l1.414 1.414M7.05 7.05L5.636 5.636"})});case"profile":return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A9 9 0 1118.88 6.195 9 9 0 015.12 17.804z"}),(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]});default:return null}}function c(e){let{active:t}=e,s=(0,a.useRouter)(),[i,c]=(0,l.useState)(!1),[d,m]=(0,l.useState)(null),u=[{name:"home",icon:(0,n.jsx)(r,{name:"home"}),route:"/"},{name:"swap",icon:(0,n.jsx)(r,{name:"swap"}),route:"/swap"},{name:"browser",icon:(0,n.jsx)(r,{name:"browser"}),route:"/browser"},{name:"profile",icon:(0,n.jsx)(r,{name:"profile"}),route:"/profile"}],x=e=>{m(e),c(!0)};return(0,n.jsxs)(n.Fragment,{children:[i&&(0,n.jsx)(o,{onFinish:()=>{c(!1),d&&s.push(d)}}),(0,n.jsx)("div",{className:"btm-nav bg-neutral border-t border-gray-700 text-white",children:u.map(e=>(0,n.jsxs)("button",{className:"flex flex-col items-center justify-center text-xs py-2 ".concat(t===e.name?"text-primary font-semibold":"text-gray-400"),onClick:()=>x(e.route),children:[(0,n.jsx)("span",{className:"text-lg",children:e.icon}),e.name.charAt(0).toUpperCase()+e.name.slice(1)]},e.name))})]})}},8543:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var n=s(5893),a=s(7294),l=s(7066),i=s(6571),o=s(5342),r=s(2002);function c(e){let{open:t,type:s,onClose:l,onSubmit:i}=e,[o,r]=(0,a.useState)({amount:"",to:""});if(!t)return null;let c={buy:"Buy",send:"Send",receive:"Receive"};return(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:(0,n.jsxs)("div",{className:"bg-neutral text-white rounded-md w-[90%] max-w-md p-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold",children:[c[s]," Token"]}),(0,n.jsx)("button",{className:"btn btn-xs btn-ghost text-white",onClick:l,children:"✕"})]}),(0,n.jsxs)("div",{className:"space-y-3",children:["receive"!==s&&(0,n.jsx)("input",{className:"input input-bordered w-full bg-gray-800 text-white",placeholder:"Amount",value:o.amount,onChange:e=>r(t=>({...t,amount:e.target.value}))}),"send"===s&&(0,n.jsx)("input",{className:"input input-bordered w-full bg-gray-800 text-white",placeholder:"Destination address",value:o.to,onChange:e=>r(t=>({...t,to:e.target.value}))}),"receive"===s&&(0,n.jsx)("p",{className:"text-sm text-gray-300",children:"Share this public address to receive funds."}),(0,n.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,n.jsx)("button",{className:"btn btn-ghost",onClick:l,children:"Cancel"}),(0,n.jsx)("button",{className:"btn btn-primary",onClick:()=>{i&&i({type:s,form:o}),l()},children:c[s]})]})]})]})})}function d(){let[e,t]=(0,a.useState)(null),[s,d]=(0,a.useState)(null),[m,u]=(0,a.useState)(!0),[x,h]=(0,a.useState)(null),[p,b]=(0,a.useState)([]),[f,g]=(0,a.useState)(null),[j,w]=(0,a.useState)({}),[y,v]=(0,a.useState)({open:!1,type:null}),N="https://dopewalletbot-production.up.railway.app";return(0,a.useEffect)(()=>{var e,s,n;let a=null===(e=window.Telegram)||void 0===e?void 0:e.WebApp;null==a||a.expand();let i=null==a?void 0:null===(n=a.initDataUnsafe)||void 0===n?void 0:null===(s=n.user)||void 0===s?void 0:s.id;if(!i){h("No Telegram user detected. Open inside the Telegram Web App or sign in."),u(!1);return}(async()=>{var e,s,n;try{let s=await l.Z.get("".concat(N,"/wallet/balance/").concat(i));t(s.data.publicKey),d(s.data.balance);let n=await l.Z.get("".concat(N,"/wallet/tokens/").concat(i));b(n.data.tokens||[]);let a={};for(let t of n.data.tokens||[])try{let s=await l.Z.get("https://api.dexscreener.com/latest/dex/tokens/".concat(t.mint)),n=null===(e=s.data.pairs)||void 0===e?void 0:e[0];a[t.symbol]=(null==n?void 0:n.priceUsd)?parseFloat(n.priceUsd):null}catch(e){a[t.symbol]=null}w(a)}catch(e){h((null===(n=e.response)||void 0===n?void 0:null===(s=n.data)||void 0===s?void 0:s.error)||e.message)}finally{u(!1)}})()},[]),(0,n.jsxs)("div",{className:"min-h-screen flex flex-col justify-between bg-phantom-bg text-white",children:[(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,n.jsx)("img",{src:"/logo-512.png",alt:"DopeWallet Logo",className:"w-8 h-8 rounded-full"}),(0,n.jsx)("h1",{className:"text-xl font-bold",children:"DopeWallet"})]}),m&&(0,n.jsx)("p",{className:"text-gray-400",children:"Loading wallet..."}),x&&(0,n.jsx)("p",{className:"text-red-500",children:x}),!m&&!x&&(0,n.jsx)(i.E.div,{className:"card bg-gradient-to-br from-[#1b133d] to-[#0A0A0B] shadow-xl mb-6 border border-gray-800",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},children:(0,n.jsxs)("div",{className:"card-body flex flex-col items-center",children:[(0,n.jsx)("h2",{className:"card-title text-sm text-gray-400",children:"Wallet Balance"}),(0,n.jsx)("p",{className:"truncate text-xs text-gray-500 mb-2",children:e}),(0,n.jsxs)("h3",{className:"text-4xl font-bold mt-2 mb-2",children:[null==s?void 0:s.toFixed(3)," SOL"]}),(0,n.jsxs)("div",{className:"flex gap-3 mb-2",children:[(0,n.jsx)("button",{className:"btn btn-sm bg-green-600 text-white font-semibold shadow-md",onClick:()=>v({open:!0,type:"buy"}),children:"Buy"}),(0,n.jsx)("button",{className:"btn btn-sm bg-blue-600 text-white font-semibold shadow-md",onClick:()=>v({open:!0,type:"send"}),children:"Send"}),(0,n.jsx)("button",{className:"btn btn-sm bg-purple-600 text-white font-semibold shadow-md",onClick:()=>v({open:!0,type:"receive"}),children:"Receive"})]}),(0,n.jsx)("button",{className:"btn btn-xs bg-phantom-accent text-white mt-2",onClick:()=>window.location.reload(),children:"Refresh"})]})}),!m&&!x&&(0,n.jsx)(i.E.div,{className:"card bg-neutral shadow-xl mb-6 border border-gray-800",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},children:(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsx)("h2",{className:"font-semibold mb-2",children:"Token Holdings"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[0===p.length&&(0,n.jsx)("p",{className:"text-gray-400 col-span-2",children:"No tokens found."}),p.map(e=>(0,n.jsxs)("div",{className:"card bg-secondary text-center py-3 cursor-pointer hover:shadow-lg transition",onClick:()=>g(e),children:[(0,n.jsx)("p",{className:"font-bold text-lg mb-1",children:e.symbol}),(0,n.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:e.mint}),(0,n.jsxs)("p",{className:"text-sm",children:["Amount: ",e.amount]}),(0,n.jsxs)("p",{className:"text-xs text-gray-300",children:["Price: ",j[e.symbol]?"$".concat(j[e.symbol].toFixed(4)):"N/A"]}),(0,n.jsxs)("p",{className:"text-xs text-gray-300 font-semibold",children:["Value: ",j[e.symbol]?"$".concat((e.amount*j[e.symbol]).toFixed(2)):"N/A"]})]},e.symbol))]})]})}),f&&(0,n.jsx)(r.Z,{token:f,onClose:()=>g(null)})]}),(0,n.jsx)(o.Z,{active:"home"}),(0,n.jsx)(c,{open:y.open,type:y.type,onClose:()=>v({open:!1,type:null}),onSubmit:e=>{let{type:t,form:s}=e;return console.log("Action submit",t,s)}})]})}},1163:function(e,t,s){e.exports=s(9090)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5728)}),_N_E=e.O()}]);