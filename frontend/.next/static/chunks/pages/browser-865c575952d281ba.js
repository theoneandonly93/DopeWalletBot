(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[672],{3526:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/browser",function(){return n(6117)}])},2896:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(5893),l=n(1664),i=n.n(l),a=n(1163);function r(){let e=(0,a.useRouter)(),t=e.pathname.startsWith("/swap")?"swap":e.pathname.startsWith("/earn")?"earn":e.pathname.startsWith("/profile")?"profile":e.pathname.startsWith("/browser")?"browser":"wallet",n=e=>{let{href:t,label:n,active:l}=e;return(0,s.jsxs)(i(),{href:t,className:"flex flex-col items-center text-xs ".concat(l?"text-white":"text-textDim"),children:[(0,s.jsx)("div",{className:"w-9 h-9 rounded-full flex items-center justify-center ".concat(l?"bg-accent/20":"bg-[#171717]"),children:"Wallet"===n?"\uD83D\uDD37":"Swap"===n?"\uD83D\uDD01":"Profile"===n?"\uD83E\uDEAA":"Browser"===n?"\uD83E\uDDED":"%"}),(0,s.jsx)("div",{className:"mt-1",children:n})]})};return(0,s.jsxs)("nav",{className:"fixed bottom-0 inset-x-0 bg-bg border-t border-line py-2 flex justify-around",children:[(0,s.jsx)(n,{href:"/",label:"Wallet",active:"wallet"===t}),(0,s.jsx)(n,{href:"/swap",label:"Swap",active:"swap"===t}),(0,s.jsx)(n,{href:"/profile",label:"Profile",active:"profile"===t}),(0,s.jsx)(n,{href:"/browser",label:"Browser",active:"browser"===t})]})}},6469:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var s=n(5893),l=n(7294),i=n(1163),a=n(7066),r=n(1664),o=n.n(r),c=n(1526),d=n(3495);function u(e){let{onClose:t}=e;return(0,s.jsx)(c.M,{children:(0,s.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 flex flex-col justify-end",onClick:t,children:(0,s.jsxs)(d.E.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{duration:.28},className:"bg-[#111] rounded-t-2xl text-white p-4 space-y-2",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{className:"w-16 h-1 bg-[#333] rounded-full mx-auto mb-3"}),(0,s.jsx)("h3",{className:"text-center text-sm font-semibold text-textDim mb-2",children:"Wallet mini app"}),(0,s.jsxs)("div",{className:"divide-y divide-[#222]",children:[(0,s.jsxs)(o(),{href:"/settings",className:"flex items-center justify-between py-3",children:[(0,s.jsx)("span",{children:"⚙️ Settings"}),(0,s.jsx)("span",{children:"›"})]}),(0,s.jsxs)("a",{href:"https://t.me/dopewalletbot",target:"_blank",rel:"noreferrer",className:"flex items-center justify-between py-3",children:[(0,s.jsx)("span",{children:"\uD83E\uDD16 Open Bot"}),(0,s.jsx)("span",{children:"›"})]}),(0,s.jsxs)("button",{onClick:()=>window.location.reload(),className:"flex items-center justify-between py-3 w-full",children:[(0,s.jsx)("span",{children:"\uD83D\uDD04 Reload Page"}),(0,s.jsx)("span",{children:"›"})]}),(0,s.jsxs)(o(),{href:"/terms",className:"flex items-center justify-between py-3",children:[(0,s.jsx)("span",{children:"\uD83D\uDCC4 Terms of Use"}),(0,s.jsx)("span",{children:"›"})]}),(0,s.jsxs)(o(),{href:"/privacy",className:"flex items-center justify-between py-3",children:[(0,s.jsx)("span",{children:"\uD83D\uDD12 Privacy Policy"}),(0,s.jsx)("span",{children:"›"})]}),(0,s.jsxs)("button",{onClick:()=>{try{localStorage.removeItem("dopewallet_signedin")}catch(e){}try{window.dispatchEvent(new Event("dopewallet:signout"))}catch(e){}window.location.reload()},className:"flex items-center justify-between py-3 text-sm w-full",children:[(0,s.jsx)("span",{children:"\uD83D\uDD13 Sign out"}),(0,s.jsx)("span",{children:"›"})]}),(0,s.jsxs)("button",{className:"flex items-center justify-between py-3 text-red-500 w-full",children:[(0,s.jsx)("span",{children:"\uD83D\uDDD1 Remove from Menu"}),(0,s.jsx)("span",{children:"›"})]})]}),(0,s.jsx)("button",{onClick:t,className:"mt-4 w-full bg-[#222] rounded-xl py-2 text-sm text-textDim",children:"Close"})]})},"menu")})}var x=n(3454);function m(){let[e,t]=(0,l.useState)(!1),[n,r]=(0,l.useState)(null),o=(0,i.useRouter)();return(0,l.useEffect)(()=>{try{var e,t,n;let s=null===(e=window.Telegram)||void 0===e?void 0:e.WebApp,l=(null==s?void 0:null===(n=s.initDataUnsafe)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.id)||(null==s?void 0:s.initData)&&(()=>{try{var e;return null===(e=JSON.parse(s.initData).user)||void 0===e?void 0:e.id}catch(e){return null}})();if(!l)return;(async()=>{try{var e;let t=x.env.NEXT_PUBLIC_BACKEND_URL||"https://dopewalletbot-production.up.railway.app",n=await a.Z.get("".concat(t,"/profile/by_telegram/").concat(l));r((null===(e=n.data)||void 0===e?void 0:e.avatar_url)||null)}catch(e){}})()}catch(e){}},[]),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-line bg-bg",children:[(0,s.jsx)("button",{onClick:()=>o.push("/profile?edit=true"),className:"flex items-center gap-2",children:n?(0,s.jsx)("img",{src:n,alt:"avatar",className:"w-8 h-8 rounded-full object-cover"}):(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#222] flex items-center justify-center text-sm",children:"\uD83D\uDC7B"})}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("p",{className:"font-semibold",children:"\xa0"})}),(0,s.jsx)("button",{onClick:()=>t(!0),className:"text-2xl text-textDim hover:text-white",children:"•••"}),e&&(0,s.jsx)(u,{onClose:()=>t(!1)})]})}},6117:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var s=n(5893),l=n(7294),i=n(6469),a=n(2896);function r(){let e=(0,l.useRef)(null),[t,n]=(0,l.useState)("https://pump.fun/"),[r,o]=(0,l.useState)(!1),[c,d]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let t=localStorage.getItem("publicKey");t&&d(t);let n=e.current,s=()=>{if(n)try{let e=n.contentWindow;e.location.href;let s='\n          (() => {\n            window.solana = {\n              isPhantom: true,\n              publicKey: { toString: () => "'.concat(t,'" },\n              connect: () => Promise.resolve({ publicKey: "').concat(t,"\" }),\n              disconnect: () => Promise.resolve(),\n              signTransaction: (tx) => Promise.resolve(tx),\n              signAllTransactions: (txs) => Promise.resolve(txs),\n              signMessage: (msg) => Promise.resolve({ signature: msg }),\n            };\n            window.dispatchEvent(new Event('solana#initialized'));\n          })();\n        ");e.eval(s),o(!0)}catch(e){console.warn("Provider injection skipped (cross-origin or blocked):",e.message||e),o(!1)}};return null==n||n.addEventListener("load",s),()=>null==n?void 0:n.removeEventListener("load",s)},[]),(0,s.jsxs)("div",{className:"min-h-screen flex flex-col justify-between bg-phantom-bg text-white",children:[(0,s.jsx)(i.Z,{}),(0,s.jsx)("div",{className:"p-3",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t.startsWith("http")||n("https://".concat(t))},className:"flex mb-2",children:[(0,s.jsx)("input",{type:"text",value:t,onChange:e=>n(e.target.value),className:"input input-bordered w-full bg-secondary text-sm text-gray-300",placeholder:"Enter dApp URL..."}),(0,s.jsx)("button",{className:"btn btn-primary ml-2 text-white",type:"submit",children:"Go"})]})}),(0,s.jsx)("div",{className:"w-full bg-black p-2",children:(0,s.jsx)("div",{className:"w-full h-[80vh] bg-black rounded-md overflow-hidden",children:(0,s.jsx)("iframe",{ref:e,src:t,className:"w-full h-full border-0",sandbox:"allow-same-origin allow-scripts allow-popups allow-forms allow-top-navigation"})})}),!r&&(0,s.jsx)("div",{className:"p-3 text-center text-sm text-yellow-300 bg-yellow-900/10 rounded-md",children:"Provider injection disabled for cross-origin sites. Open the dApp in a same-origin context to enable the injected wallet provider."}),(0,s.jsx)(a.Z,{})]})}}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=3526)}),_N_E=e.O()}]);