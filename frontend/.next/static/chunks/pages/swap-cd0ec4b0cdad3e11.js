(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[503],{9238:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/swap",function(){return s(380)}])},5342:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var n=s(5893),a=s(1163),l=s(7294),r=s(6571);function i(e){let{onFinish:t}=e;return l.useEffect(()=>{let e=setTimeout(()=>{t()},1200);return()=>clearTimeout(e)},[t]),(0,n.jsx)(r.E.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-[#1b133d] to-[#0A0A0B]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:(0,n.jsxs)(r.E.div,{initial:{scale:.7,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:120,damping:10},className:"flex flex-col items-center",children:[(0,n.jsx)("img",{src:"/logo-512.png",alt:"DopeWallet Logo",className:"w-24 h-24 mb-2 rounded-full shadow-lg"}),(0,n.jsx)("h1",{className:"text-3xl font-bold text-white tracking-wide",children:"DopeWallet"})]})})}function o(e){let{name:t,className:s="h-6 w-6 text-white"}=e;switch(t){case"home":return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l9-8 9 8v8a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-4H9v4a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-8z"})});case"swap":return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7h11M21 17H10M14 3l7 7-7 7"})});case"browser":return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v2m0 14v2m9-9h-2M5 12H3m15.364-6.364l-1.414 1.414M7.05 16.95l-1.414 1.414M16.95 16.95l1.414 1.414M7.05 7.05L5.636 5.636"})});case"profile":return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A9 9 0 1118.88 6.195 9 9 0 015.12 17.804z"}),(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]});default:return null}}function c(e){let{active:t}=e,s=(0,a.useRouter)(),[r,c]=(0,l.useState)(!1),[u,d]=(0,l.useState)(null),m=[{name:"home",icon:(0,n.jsx)(o,{name:"home"}),route:"/"},{name:"swap",icon:(0,n.jsx)(o,{name:"swap"}),route:"/swap"},{name:"browser",icon:(0,n.jsx)(o,{name:"browser"}),route:"/browser"},{name:"profile",icon:(0,n.jsx)(o,{name:"profile"}),route:"/profile"}],x=e=>{d(e),c(!0)};return(0,n.jsxs)(n.Fragment,{children:[r&&(0,n.jsx)(i,{onFinish:()=>{c(!1),u&&s.push(u)}}),(0,n.jsx)("div",{className:"btm-nav bg-neutral border-t border-gray-700 text-white",children:m.map(e=>(0,n.jsxs)("button",{className:"flex flex-col items-center justify-center text-xs py-2 ".concat(t===e.name?"text-primary font-semibold":"text-gray-400"),onClick:()=>x(e.route),children:[(0,n.jsx)("span",{className:"text-lg",children:e.icon}),e.name.charAt(0).toUpperCase()+e.name.slice(1)]},e.name))})]})}},380:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var n=s(5893),a=s(7294),l=s(7066),r=s(5342);function i(){let[e,t]=(0,a.useState)("So11111111111111111111111111111111111111112"),[s,i]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),[u,d]=(0,a.useState)(null),[m,x]=(0,a.useState)(null),[p,h]=(0,a.useState)(!1),[w,g]=(0,a.useState)(null),f="https://dopewalletbot-production.up.railway.app";(0,a.useEffect)(()=>{let e=localStorage.getItem("swapToken");e&&i(e),(async()=>{try{var e;let t=await l.Z.get("".concat(f,"/ai/predictions")),s=null===(e=t.data)||void 0===e?void 0:e[0];s&&g(s)}catch(e){}})()},[]);let b=async()=>{if(o&&s){h(!0);try{let t=await l.Z.post("".concat(f,"/swap/quote"),{inputMint:e,outputMint:s,amount:1e9*parseFloat(o)});d(t.data),x(null)}catch(e){var t,n;x((null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.error)||e.message)}finally{h(!1)}}},v=async()=>{var e,t,s,n,a;if(u){h(!0);try{let n=null===(e=window.Telegram)||void 0===e?void 0:e.WebApp;null==n||null===(s=n.initDataUnsafe)||void 0===s||null===(t=s.user)||void 0===t||t.id;let a=await l.Z.post("".concat(f,"/swap/execute"),{userPrivateKey:localStorage.getItem("privateKey"),route:{...u,userPublicKey:localStorage.getItem("publicKey")}});x("✅ Swap sent! Tx: ".concat(a.data.signature))}catch(e){x((null===(a=e.response)||void 0===a?void 0:null===(n=a.data)||void 0===n?void 0:n.error)||e.message)}finally{h(!1)}}};return(0,n.jsxs)("div",{className:"min-h-screen flex flex-col justify-between bg-phantom-bg text-white",children:[(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("h1",{className:"text-xl font-bold mb-4",children:"\uD83D\uDCB1 Swap Tokens"}),(0,n.jsxs)("div",{className:"card bg-neutral p-4 mb-3",children:[w&&(0,n.jsx)("div",{className:"mb-3 p-2 bg-secondary rounded",children:(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-xs text-gray-400",children:"AI suggestion"}),(0,n.jsxs)("p",{className:"font-semibold",children:[w.symbol," — ",w.mint]})]}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{className:"btn btn-xs btn-outline text-white",onClick:()=>i(w.mint),children:"Use"})})]})}),(0,n.jsx)("label",{className:"label text-sm text-gray-400",children:"From (SOL)"}),(0,n.jsx)("input",{type:"number",placeholder:"Amount",className:"input input-bordered w-full bg-secondary",value:o,onChange:e=>c(e.target.value)}),(0,n.jsx)("label",{className:"label text-sm text-gray-400 mt-3",children:"To (Output Mint)"}),(0,n.jsx)("input",{type:"text",placeholder:"e.g., USDC Mint Address",className:"input input-bordered w-full bg-secondary",value:s,onChange:e=>i(e.target.value)}),(0,n.jsx)("button",{onClick:b,disabled:p,className:"btn btn-primary mt-4 w-full text-white",children:p?"Fetching...":"Get Quote"})]}),u&&(0,n.jsxs)("div",{className:"card bg-neutral p-4 mt-3",children:[(0,n.jsx)("h2",{className:"text-sm text-gray-400 mb-2",children:"Best Route"}),(0,n.jsxs)("p",{className:"text-xs text-gray-400",children:["Out Amount: ",u.outAmount/1e9," tokens"]}),(0,n.jsxs)("p",{className:"text-xs text-gray-400 mb-3",children:["Price Impact: ",u.priceImpactPct,"%"]}),(0,n.jsx)("button",{onClick:v,disabled:p,className:"btn bg-phantom-accent text-white w-full",children:p?"Swapping...":"Execute Swap"})]}),m&&(0,n.jsx)("p",{className:"mt-4 text-center text-sm text-gray-300",children:m})]}),(0,n.jsx)(r.Z,{active:"swap"})]})}},1163:function(e,t,s){e.exports=s(9090)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=9238)}),_N_E=e.O()}]);