(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[889],{353:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/telegram-webapp",function(){return a(638)}])},638:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return r}});var n=a(5893),i=a(7294);function r(){let[e,t]=(0,i.useState)(null),[a,r]=(0,i.useState)("idle");(0,i.useEffect)(()=>{var e;let a=null===(e=window.Telegram)||void 0===e?void 0:e.WebApp;if(a){t(a.initData);try{a.expand()}catch(e){}}else r("not-in-telegram")},[]);let s=async()=>{r("verifying");try{let t=await fetch("/api/telegram/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initData:e})}),a=await t.json();if(!t.ok)throw Error(a.error||"verify failed");r("verified")}catch(e){r("error:"+(e.message||e))}};return(0,n.jsxs)("div",{className:"p-4 text-white bg-phantom-bg min-h-screen",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"DopeWallet (Telegram)"}),(0,n.jsx)("p",{className:"text-sm text-gray-300 mt-2",children:"Open this inside Telegram to use as a wallet tab."}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)("pre",{className:"text-xs bg-gray-900 p-2 rounded",children:e||"No Telegram WebApp env detected."})}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("button",{className:"btn btn-primary",onClick:s,children:"Verify initData"}),(0,n.jsx)("span",{className:"ml-3",children:a})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=353)}),_N_E=e.O()}]);