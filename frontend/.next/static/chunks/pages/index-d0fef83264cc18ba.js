(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5728:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1157)}])},2896:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(5893),a=n(1664),l=n.n(a),r=n(1163);function i(){let e=(0,r.useRouter)(),t=e.pathname.startsWith("/swap")?"swap":e.pathname.startsWith("/earn")?"earn":e.pathname.startsWith("/profile")?"profile":e.pathname.startsWith("/browser")?"browser":"wallet",n=e=>{let{href:t,label:n,active:a}=e;return(0,s.jsxs)(l(),{href:t,className:"flex flex-col items-center text-xs ".concat(a?"text-white":"text-textDim"),children:[(0,s.jsx)("div",{className:"w-9 h-9 rounded-full flex items-center justify-center ".concat(a?"bg-accent/20":"bg-[#171717]"),children:"Wallet"===n?"\uD83D\uDD37":"Swap"===n?"\uD83D\uDD01":"Profile"===n?"\uD83E\uDEAA":"Browser"===n?"\uD83E\uDDED":"%"}),(0,s.jsx)("div",{className:"mt-1",children:n})]})};return(0,s.jsxs)("nav",{className:"fixed bottom-0 inset-x-0 bg-bg border-t border-line py-2 flex justify-around",children:[(0,s.jsx)(n,{href:"/",label:"Wallet",active:"wallet"===t}),(0,s.jsx)(n,{href:"/swap",label:"Swap",active:"swap"===t}),(0,s.jsx)(n,{href:"/profile",label:"Profile",active:"profile"===t}),(0,s.jsx)(n,{href:"/browser",label:"Browser",active:"browser"===t})]})}},6469:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var s=n(5893),a=n(7294),l=n(1163),r=n(7066),i=n(1664),c=n.n(i),o=n(1526),d=n(3495);function u(e){let{onClose:t}=e;return(0,s.jsx)(o.M,{children:(0,s.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 flex flex-col justify-end",onClick:t,children:(0,s.jsxs)(d.E.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{duration:.28},className:"bg-[#111] rounded-t-2xl text-white p-4 space-y-2",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{className:"w-16 h-1 bg-[#333] rounded-full mx-auto mb-3"}),(0,s.jsx)("h3",{className:"text-center text-sm font-semibold text-textDim mb-2",children:"Wallet mini app"}),(0,s.jsxs)("div",{className:"divide-y divide-[#222]",children:[(0,s.jsxs)(c(),{href:"/settings",className:"flex items-center justify-between py-3",children:[(0,s.jsx)("span",{children:"⚙️ Settings"}),(0,s.jsx)("span",{children:"›"})]}),(0,s.jsxs)("a",{href:"https://t.me/dopewalletbot",target:"_blank",rel:"noreferrer",className:"flex items-center justify-between py-3",children:[(0,s.jsx)("span",{children:"\uD83E\uDD16 Open Bot"}),(0,s.jsx)("span",{children:"›"})]}),(0,s.jsxs)("button",{onClick:()=>window.location.reload(),className:"flex items-center justify-between py-3 w-full",children:[(0,s.jsx)("span",{children:"\uD83D\uDD04 Reload Page"}),(0,s.jsx)("span",{children:"›"})]}),(0,s.jsxs)(c(),{href:"/terms",className:"flex items-center justify-between py-3",children:[(0,s.jsx)("span",{children:"\uD83D\uDCC4 Terms of Use"}),(0,s.jsx)("span",{children:"›"})]}),(0,s.jsxs)(c(),{href:"/privacy",className:"flex items-center justify-between py-3",children:[(0,s.jsx)("span",{children:"\uD83D\uDD12 Privacy Policy"}),(0,s.jsx)("span",{children:"›"})]}),(0,s.jsxs)("button",{onClick:()=>{try{localStorage.removeItem("dopewallet_signedin")}catch(e){}try{window.dispatchEvent(new Event("dopewallet:signout"))}catch(e){}window.location.reload()},className:"flex items-center justify-between py-3 text-sm w-full",children:[(0,s.jsx)("span",{children:"\uD83D\uDD13 Sign out"}),(0,s.jsx)("span",{children:"›"})]}),(0,s.jsxs)("button",{className:"flex items-center justify-between py-3 text-red-500 w-full",children:[(0,s.jsx)("span",{children:"\uD83D\uDDD1 Remove from Menu"}),(0,s.jsx)("span",{children:"›"})]})]}),(0,s.jsx)("button",{onClick:t,className:"mt-4 w-full bg-[#222] rounded-xl py-2 text-sm text-textDim",children:"Close"})]})},"menu")})}var x=n(3454);function p(){let[e,t]=(0,a.useState)(!1),[n,i]=(0,a.useState)(null),c=(0,l.useRouter)();return(0,a.useEffect)(()=>{try{var e,t,n;let s=null===(e=window.Telegram)||void 0===e?void 0:e.WebApp,a=(null==s?void 0:null===(n=s.initDataUnsafe)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.id)||(null==s?void 0:s.initData)&&(()=>{try{var e;return null===(e=JSON.parse(s.initData).user)||void 0===e?void 0:e.id}catch(e){return null}})();if(!a)return;(async()=>{try{var e;let t=x.env.NEXT_PUBLIC_BACKEND_URL||"https://dopewalletbot-production.up.railway.app",n=await r.Z.get("".concat(t,"/profile/by_telegram/").concat(a));i((null===(e=n.data)||void 0===e?void 0:e.avatar_url)||null)}catch(e){}})()}catch(e){}},[]),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-line bg-bg",children:[(0,s.jsx)("button",{onClick:()=>c.push("/profile?edit=true"),className:"flex items-center gap-2",children:n?(0,s.jsx)("img",{src:n,alt:"avatar",className:"w-8 h-8 rounded-full object-cover"}):(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#222] flex items-center justify-center text-sm",children:"\uD83D\uDC7B"})}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("p",{className:"font-semibold",children:"\xa0"})}),(0,s.jsx)("button",{onClick:()=>t(!0),className:"text-2xl text-textDim hover:text-white",children:"•••"}),e&&(0,s.jsx)(u,{onClose:()=>t(!1)})]})}},1441:function(e,t,n){"use strict";n.d(t,{EK:function(){return x},wb:function(){return m},FV:function(){return p}});var s=n(7191),a=n.n(s),l=n(2153),r=n(2678),i=n(95);async function c(e,t){let n=new TextEncoder,s=await crypto.subtle.importKey("raw",n.encode(e),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:1e5,hash:"SHA-256"},s,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function o(e,t){let n=crypto.getRandomValues(new Uint8Array(12)),s=crypto.getRandomValues(new Uint8Array(16)),a=await c(e,s),l=new TextEncoder().encode(JSON.stringify(t)),r=new Uint8Array(await crypto.subtle.encrypt({name:"AES-GCM",iv:n},a,l));return btoa(JSON.stringify({iv:Array.from(n),salt:Array.from(s),ct:Array.from(r)}))}async function d(e,t){let{iv:n,salt:s,ct:a}=JSON.parse(atob(t)),l=await c(e,new Uint8Array(s)),r=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(n)},l,new Uint8Array(a));return JSON.parse(new TextDecoder().decode(new Uint8Array(r)))}let u="DW_VAULT_V1";async function x(){let e=l.OF(128),t=await l.OI(e),{key:n}=(0,r.derivePath)("m/44'/501'/0'/0'",t.toString("hex")),s=i.RG.fromSeed(n);return{pubkey:s.publicKey.toBase58(),pkBase58:a().encode(s.secretKey),mnemonic:e,createdAt:Date.now()}}async function p(e,t){let n=await o(e,t);sessionStorage.setItem(u,n)}async function m(e){let t=sessionStorage.getItem(u);return t?await d(e,t):null}},1157:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=n(5893),a=n(7294),l=n(1163),r=n(6469),i=n(2896),c=n(1441),o=n(3495);function d(){let[e,t]=(0,a.useState)(null),[n,d]=(0,a.useState)("choose"),[u,x]=(0,a.useState)(null);async function p(){x(await (0,c.EK)()),d("create")}async function m(){var e,n;let s=null===(e=document.getElementById("p1"))||void 0===e?void 0:e.value,a=null===(n=document.getElementById("p2"))||void 0===n?void 0:n.value;if(!s||s!==a)return alert("Passwords must match");if(u){await (0,c.FV)(s,u),sessionStorage.setItem("DW_LAST_PW",s),t(u),d("choose"),localStorage.setItem("dopewallet_signedin","true");try{window.dispatchEvent(new Event("dopewallet:signin"))}catch(e){}try{h.push("/profile")}catch(e){}}}async function f(){let e=prompt("Enter your wallet password:");if(!e)return;let n=await (0,c.wb)(e);if(!n)return alert("Invalid password or no wallet found.");t(n),localStorage.setItem("dopewallet_signedin","true");try{window.dispatchEvent(new Event("dopewallet:signin"))}catch(e){}}(0,a.useEffect)(()=>{try{!function(){try{var e,t,n,s;let a=null===(t=window)||void 0===t?void 0:null===(e=t.Telegram)||void 0===e?void 0:e.WebApp;null==a||null===(n=a.ready)||void 0===n||n.call(a),null==a||null===(s=a.expand)||void 0===s||s.call(a)}catch(e){}}()}catch(e){}},[]);let h=(0,l.useRouter)();return(0,s.jsxs)("div",{className:"min-h-screen bg-bg text-white flex flex-col pb-24",children:[(0,s.jsx)(r.Z,{}),"choose"===n&&!e&&(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center px-6 space-y-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o.E.img,{src:"/logo-512.png",alt:"DopeWallet",className:"w-28 h-28 mx-auto mb-3 relative z-10",animate:{y:[0,-6,0],scale:[.995,1,.995],rotate:[0,4,0]},transition:{y:{repeat:1/0,duration:2.6,ease:"easeInOut"},scale:{repeat:1/0,duration:3.6},rotate:{repeat:1/0,duration:6}}}),(0,s.jsx)(o.E.div,{"aria-hidden":!0,className:"absolute inset-0 flex items-center justify-center z-0",children:(0,s.jsx)(o.E.span,{"aria-hidden":!0,className:"rounded-full",style:{width:96,height:96,pointerEvents:"none",filter:"blur(18px)",background:"radial-gradient(circle at 50% 40%, rgba(140,104,255,0.9), rgba(140,104,255,0.4) 40%, rgba(140,104,255,0) 70%)"},animate:{opacity:[0,.85,0]},transition:{repeat:1/0,duration:3,ease:"easeInOut"}})})]}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Choose DopeWallet"}),(0,s.jsxs)("p",{className:"text-textDim text-sm leading-relaxed",children:["You have one DopeWallet available for recovery.",(0,s.jsx)("br",{}),"Restore it or add a new one."]}),(0,s.jsxs)("div",{className:"w-full bg-card rounded-xl border border-line py-3 px-4 text-left space-y-1",children:[(0,s.jsx)("div",{className:"text-sm",children:(0,s.jsx)("span",{className:"text-textDim",children:(null==e?void 0:e.pubkey)?"".concat(e.pubkey.slice(0,4),"...").concat(e.pubkey.slice(-4)):"No saved wallet yet"})}),(0,s.jsx)("div",{className:"text-xs text-textDim",children:"$0.00 \xb7 0 tokens \xb7 0 collectibles"})]}),(0,s.jsx)("button",{onClick:f,className:"w-full bg-accent rounded-xl py-2 text-white font-semibold",children:"Restore Wallet"}),(0,s.jsx)("button",{onClick:p,className:"text-[#3B82F6] font-medium",children:"Create or import another wallet"})]}),"create"===n&&u&&(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center px-6 space-y-4",children:[(0,s.jsx)("img",{src:"/logo-512.png",alt:"DopeWallet",className:"w-28 h-28 mx-auto mb-3"}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Secure Your Wallet"}),(0,s.jsxs)("p",{className:"text-textDim text-sm",children:["Your new address:",(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"text-white text-xs break-all",children:u.pubkey})]}),(0,s.jsxs)("div",{className:"w-full bg-card rounded-xl p-4 space-y-3",children:[(0,s.jsx)("input",{id:"p1",type:"password",placeholder:"Password",className:"w-full bg-[#111] border border-line rounded-xl2 p-2"}),(0,s.jsx)("input",{id:"p2",type:"password",placeholder:"Confirm Password",className:"w-full bg-[#111] border border-line rounded-xl2 p-2"}),(0,s.jsx)("button",{onClick:m,className:"w-full bg-accent text-white rounded-xl2 py-2 font-semibold",children:"Continue"})]}),(0,s.jsx)("div",{className:"text-xs text-textDim max-w-sm",children:"Be sure to save your recovery phrase and private key safely."})]}),e&&(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center px-6 text-center space-y-3",children:[(0,s.jsx)("div",{className:"text-lg font-semibold",children:"Welcome back"}),(0,s.jsxs)("div",{className:"text-xs text-textDim",children:[e.pubkey.slice(0,4),"...",e.pubkey.slice(-4)]}),(0,s.jsx)("button",{onClick:()=>{localStorage.setItem("dopewallet_signedin","true");try{window.dispatchEvent(new Event("dopewallet:signin"))}catch(e){}h.push("/profile")},className:"bg-accent rounded-xl py-2 px-6",children:"Enter Wallet"})]}),(0,s.jsx)(i.Z,{})]})}},2361:function(){},4616:function(){},5024:function(){},5545:function(){}},function(e){e.O(0,[818,664,717,888,774,179],function(){return e(e.s=5728)}),_N_E=e.O()}]);